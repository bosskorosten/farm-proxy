"use strict";var __getOwnPropNames=Object.getOwnPropertyNames;var __commonJS=(cb,mod)=>function(){return mod||(0,cb[__getOwnPropNames(cb)[0]])((mod={exports:{}}).exports,mod),mod.exports};var require_src=__commonJS({"../../../../.yarn/cache/real-require-npm-0.2.0-7f69dbc7b6-ddf44ee763.zip/node_modules/real-require/src/index.js"(exports2,module2){var realImport=new Function("modulePath","return import(modulePath)");function realRequire(modulePath){return typeof __non_webpack__require__=="function"?__non_webpack__require__(modulePath):require(modulePath)}module2.exports={realImport,realRequire}}});var require_transport_stream=__commonJS({"../../../../.yarn/cache/pino-npm-9.0.0-447c56cda1-04875e64e1.zip/node_modules/pino/lib/transport-stream.js"(exports2,module2){"use strict";var{realImport,realRequire}=require_src();module2.exports=loadTransportStreamBuilder2;async function loadTransportStreamBuilder2(target){let fn;try{let toLoad="file://"+target;toLoad.endsWith(".ts")||toLoad.endsWith(".cts")?(process[Symbol.for("ts-node.register.instance")]?realRequire("ts-node/register"):process.env&&process.env.TS_NODE_DEV&&realRequire("ts-node-dev"),fn=realRequire(decodeURIComponent(target))):fn=await realImport(toLoad)}catch(error){if(error.code==="ENOTDIR"||error.code==="ERR_MODULE_NOT_FOUND")fn=realRequire(target);else if(error.code===void 0)fn=realRequire(decodeURIComponent(target));else throw error}if(typeof fn=="object"&&(fn=fn.default),typeof fn=="object"&&(fn=fn.default),typeof fn!="function")throw Error("exported worker is not a function");return fn}}});var EE=require("events"),loadTransportStreamBuilder=require_transport_stream(),{pipeline,PassThrough}=require("stream");module.exports=async function({targets}){let streams=await Promise.all(targets.map(async t=>await(await loadTransportStreamBuilder(t.target))(t.options))),ee=new EE,stream=new PassThrough({autoDestroy:!0,destroy(_,cb){ee.on("error",cb),ee.on("closed",cb)}});return pipeline(stream,...streams,function(err){if(err&&err.code!=="ERR_STREAM_PREMATURE_CLOSE"){ee.emit("error",err);return}ee.emit("closed")}),stream};
//# sourceMappingURL=pino-pipeline-worker.cjs.map
