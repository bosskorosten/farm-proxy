{
  "version": 3,
  "sources": ["../../../../.yarn/cache/real-require-npm-0.2.0-7f69dbc7b6-ddf44ee763.zip/node_modules/real-require/src/index.js", "../../../../.yarn/cache/pino-npm-9.0.0-447c56cda1-04875e64e1.zip/node_modules/pino/lib/transport-stream.js", "../../../../.yarn/cache/pino-npm-9.0.0-447c56cda1-04875e64e1.zip/node_modules/pino/lib/worker-pipeline.js"],
  "sourcesContent": ["/* eslint-disable no-new-func, camelcase */\n/* globals __non_webpack__require__ */\n\nconst realImport = new Function('modulePath', 'return import(modulePath)')\n\nfunction realRequire(modulePath) {\n  if (typeof __non_webpack__require__ === 'function') {\n    return __non_webpack__require__(modulePath)\n  }\n\n  return require(modulePath)\n}\n\nmodule.exports = { realImport, realRequire }\n", "'use strict'\n\nconst { realImport, realRequire } = require('real-require')\n\nmodule.exports = loadTransportStreamBuilder\n\n/**\n * Loads & returns a function to build transport streams\n * @param {string} target\n * @returns {function(object): Promise<import('stream').Writable>}\n * @throws {Error} In case the target module does not export a function\n */\nasync function loadTransportStreamBuilder (target) {\n  let fn\n  try {\n    const toLoad = 'file://' + target\n\n    if (toLoad.endsWith('.ts') || toLoad.endsWith('.cts')) {\n      // TODO: add support for the TSM modules loader ( https://github.com/lukeed/tsm ).\n      if (process[Symbol.for('ts-node.register.instance')]) {\n        realRequire('ts-node/register')\n      } else if (process.env && process.env.TS_NODE_DEV) {\n        realRequire('ts-node-dev')\n      }\n      // TODO: Support ES imports once tsc, tap & ts-node provide better compatibility guarantees.\n      fn = realRequire(decodeURIComponent(target))\n    } else {\n      fn = (await realImport(toLoad))\n    }\n  } catch (error) {\n    // See this PR for details: https://github.com/pinojs/thread-stream/pull/34\n    if ((error.code === 'ENOTDIR' || error.code === 'ERR_MODULE_NOT_FOUND')) {\n      fn = realRequire(target)\n    } else if (error.code === undefined) {\n      // When bundled with pkg, an undefined error is thrown when called with realImport\n      fn = realRequire(decodeURIComponent(target))\n    } else {\n      throw error\n    }\n  }\n\n  // Depending on how the default export is performed, and on how the code is\n  // transpiled, we may find cases of two nested \"default\" objects.\n  // See https://github.com/pinojs/pino/issues/1243#issuecomment-982774762\n  if (typeof fn === 'object') fn = fn.default\n  if (typeof fn === 'object') fn = fn.default\n  if (typeof fn !== 'function') throw Error('exported worker is not a function')\n\n  return fn\n}\n", "'use strict'\n\nconst EE = require('events')\nconst loadTransportStreamBuilder = require('./transport-stream')\nconst { pipeline, PassThrough } = require('stream')\n\n// This file is not checked by the code coverage tool,\n// as it is not reliable.\n\n/* istanbul ignore file */\n\nmodule.exports = async function ({ targets }) {\n  const streams = await Promise.all(targets.map(async (t) => {\n    const fn = await loadTransportStreamBuilder(t.target)\n    const stream = await fn(t.options)\n    return stream\n  }))\n  const ee = new EE()\n\n  const stream = new PassThrough({\n    autoDestroy: true,\n    destroy (_, cb) {\n      ee.on('error', cb)\n      ee.on('closed', cb)\n    }\n  })\n\n  pipeline(stream, ...streams, function (err) {\n    if (err && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n      ee.emit('error', err)\n      return\n    }\n\n    ee.emit('closed')\n  })\n\n  return stream\n}\n"],
  "mappings": "4LAAA,8IAAAA,SAAAC,QAAA,CAGA,IAAM,WAAa,IAAI,SAAS,aAAc,2BAA2B,EAEzE,SAAS,YAAY,WAAY,CAC/B,OAAI,OAAO,0BAA6B,WAC/B,yBAAyB,UAAU,EAGrC,QAAQ,UAAU,CAC3B,CAEAA,QAAO,QAAU,CAAE,WAAY,WAAY,KCb3C,sJAAAC,SAAAC,QAAA,cAEA,GAAM,CAAE,WAAY,WAAY,EAAI,cAEpCA,QAAO,QAAUC,4BAQjB,eAAeA,4BAA4B,OAAQ,CACjD,IAAI,GACJ,GAAI,CACF,IAAM,OAAS,UAAY,OAEvB,OAAO,SAAS,KAAK,GAAK,OAAO,SAAS,MAAM,GAE9C,QAAQ,OAAO,IAAI,2BAA2B,CAAC,EACjD,YAAY,kBAAkB,EACrB,QAAQ,KAAO,QAAQ,IAAI,aACpC,YAAY,aAAa,EAG3B,GAAK,YAAY,mBAAmB,MAAM,CAAC,GAE3C,GAAM,MAAM,WAAW,MAAM,CAEjC,OAAS,MAAO,CAEd,GAAK,MAAM,OAAS,WAAa,MAAM,OAAS,uBAC9C,GAAK,YAAY,MAAM,UACd,MAAM,OAAS,OAExB,GAAK,YAAY,mBAAmB,MAAM,CAAC,MAE3C,OAAM,KAEV,CAOA,GAFI,OAAO,IAAO,WAAU,GAAK,GAAG,SAChC,OAAO,IAAO,WAAU,GAAK,GAAG,SAChC,OAAO,IAAO,WAAY,MAAM,MAAM,mCAAmC,EAE7E,OAAO,EACT,KC/CA,IAAM,GAAK,QAAQ,QAAQ,EACrB,2BAA6B,2BAC7B,CAAE,SAAU,WAAY,EAAI,QAAQ,QAAQ,EAOlD,OAAO,QAAU,eAAgB,CAAE,OAAQ,EAAG,CAC5C,IAAM,QAAU,MAAM,QAAQ,IAAI,QAAQ,IAAI,MAAO,GAEpC,MADJ,MAAM,2BAA2B,EAAE,MAAM,GAC5B,EAAE,OAAO,CAElC,CAAC,EACI,GAAK,IAAI,GAET,OAAS,IAAI,YAAY,CAC7B,YAAa,GACb,QAAS,EAAG,GAAI,CACd,GAAG,GAAG,QAAS,EAAE,EACjB,GAAG,GAAG,SAAU,EAAE,CACpB,CACF,CAAC,EAED,gBAAS,OAAQ,GAAG,QAAS,SAAU,IAAK,CAC1C,GAAI,KAAO,IAAI,OAAS,6BAA8B,CACpD,GAAG,KAAK,QAAS,GAAG,EACpB,MACF,CAEA,GAAG,KAAK,QAAQ,CAClB,CAAC,EAEM,MACT",
  "names": ["exports", "module", "exports", "module", "loadTransportStreamBuilder"]
}
